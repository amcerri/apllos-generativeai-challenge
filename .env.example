# ----------------------------------------------------------------------------
# App runtime
# ----------------------------------------------------------------------------
APP_ENV=development
APP_PORT=2024
STUDIO_PORT=2025
LOG_LEVEL=INFO
STRUCTLOG_JSON=false
TRACING_ENABLED=false

# ----------------------------------------------------------------------------
# OpenAI (required)
# ----------------------------------------------------------------------------
# Replace with a valid key before running.
OPENAI_API_KEY=sk-your-openai-key

# Preferred models (OpenAI only)
ROUTER_MODEL=gpt-4.1-mini
ANALYTICS_PLANNER_MODEL=o3
ANALYTICS_PLANNER_MODEL_FALLBACK=o4-mini
KNOWLEDGE_MODEL=gpt-4.1
KNOWLEDGE_MODEL_MINI=gpt-4.1-mini
COMMERCE_MODEL=gpt-4.1
EMBEDDINGS_MODEL=text-embedding-3-small

# ----------------------------------------------------------------------------
# Database (Postgres + pgvector)
# ----------------------------------------------------------------------------
# When running via Docker Compose, the internal hostname is the service name: "db".
# If running the app directly on your host (no Docker), switch HOST to 127.0.0.1.
POSTGRES_HOST=db
POSTGRES_PORT=5432
POSTGRES_DB=app
POSTGRES_USER=app
POSTGRES_PASSWORD=app

# SQLAlchemy/psycopg URL used by the application
DATABASE_URL=postgresql+psycopg://app:app@db:5432/app

# ----------------------------------------------------------------------------
# RAG / pgvector
# ----------------------------------------------------------------------------
PGVECTOR_COLLECTION=docs
PGVECTOR_MIN_SCORE=0.18

# ----------------------------------------------------------------------------
# Paths (mounted in Docker by Makefile)
# ----------------------------------------------------------------------------
DATA_ANALYTICS_DIR=/workspace/data/raw/analytics
DATA_DOCS_DIR=/workspace/data/docs

# ----------------------------------------------------------------------------
# LangGraph Server / Studio
# ----------------------------------------------------------------------------
LANGGRAPH_SERVER_HOST=0.0.0.0
LANGGRAPH_SERVER_PORT=2024
LANGGRAPH_STUDIO_PORT=2025
# Dev config file used by `langgraph dev --config`
LANGGRAPH_DEV_CONFIG=langgraph.json

# ----------------------------------------------------------------------------
# LangSmith (optional)
# ----------------------------------------------------------------------------
LANGSMITH_API_KEY=
LANGSMITH_TRACING=false
LANGSMITH_PROJECT=apllos-genai-poc

# ----------------------------------------------------------------------------
# Safety caps (env overrides take precedence over config.yaml)
# ----------------------------------------------------------------------------
SQL_MAX_ROWS=5000
SQL_TIMEOUT_MS=15000
CONFIDENCE_MIN=0.55
RETRIEVAL_MIN_SCORE=0.18